<div class="container-fluid mt-4">
  <h1 class="mb-4">Tableau de bord</h1>

  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
  </div>

  <div *ngIf="!loading" class="row g-4">
    <!-- Clients Card -->
    <div class="col-md-6 col-lg-3">
      <div class="card text-white bg-primary h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="card-subtitle mb-2">Clients</h6>
              <h2 class="card-title mb-0">{{ stats.totalClients }}</h2>
            </div>
            <i class="bi bi-people fs-1 opacity-50"></i>
          </div>
          <a routerLink="/clients" class="text-white text-decoration-none mt-3 d-block">
            Voir tous les clients →
          </a>
        </div>
      </div>
    </div>

    <!-- Factures Card -->
    <div class="col-md-6 col-lg-3">
      <div class="card text-white bg-info h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="card-subtitle mb-2">Factures</h6>
              <h2 class="card-title mb-0">{{ stats.totalFactures }}</h2>
              <small class="text-white-50">{{ stats.facturesEnAttente }} en attente</small>
            </div>
            <i class="bi bi-file-earmark-text fs-1 opacity-50"></i>
          </div>
          <a routerLink="/factures" class="text-white text-decoration-none mt-3 d-block">
            Voir toutes les factures →
          </a>
        </div>
      </div>
    </div>

    <!-- Factures Impayées Card -->
    <div class="col-md-6 col-lg-3">
      <div class="card text-white bg-warning h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="card-subtitle mb-2">Factures impayées</h6>
              <h2 class="card-title mb-0">{{ stats.facturesImpayees }}</h2>
            </div>
            <i class="bi bi-exclamation-triangle fs-1 opacity-50"></i>
          </div>
          <a routerLink="/factures" [queryParams]="{status: 'OVERDUE'}" class="text-white text-decoration-none mt-3 d-block">
            Voir les factures impayées →
          </a>
        </div>
      </div>
    </div>

    <!-- Paiements Card -->
    <div class="col-md-6 col-lg-3">
      <div class="card text-white bg-success h-100">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="card-subtitle mb-2">Paiements</h6>
              <h2 class="card-title mb-0">{{ stats.totalPaiements }}</h2>
            </div>
            <i class="bi bi-credit-card fs-1 opacity-50"></i>
          </div>
          <a routerLink="/paiements" class="text-white text-decoration-none mt-3 d-block">
            Voir tous les paiements →
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="row mt-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">Actions rapides</h5>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-3">
              <a routerLink="/clients/new" class="btn btn-outline-primary w-100">
                <i class="bi bi-person-plus me-2"></i>
                Nouveau client
              </a>
            </div>
            <div class="col-md-3">
              <a routerLink="/factures/new" class="btn btn-outline-info w-100">
                <i class="bi bi-file-earmark-plus me-2"></i>
                Nouvelle facture
              </a>
            </div>
            <div class="col-md-3">
              <a routerLink="/paiements/new" class="btn btn-outline-success w-100">
                <i class="bi bi-credit-card me-2"></i>
                Nouveau paiement
              </a>
            </div>
            <div class="col-md-3">
              <a routerLink="/notifications" class="btn btn-outline-secondary w-100">
                <i class="bi bi-bell me-2"></i>
                Notifications
                <span *ngIf="stats.notificationsNonLues > 0" class="badge bg-danger ms-2">
                  {{ stats.notificationsNonLues }}
                </span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


